## –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã (high-level):
1. –í–µ–∫—Ç–æ—Ä–Ω–æ–µ –ø–æ–ª–µ (20 –Ω–µ–≤–∏–¥–∏–º—ã—Ö "—Å–∏–ª–æ–≤—ã—Ö —Ç–æ—á–µ–∫"):
field.push(new PointVector(...))

–ö–∞–∂–¥–∞—è –∏–º–µ–µ—Ç –ø–æ–∑–∏—Ü–∏—é + –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
–í—Ä–∞—â–∞—é—Ç—Å—è –≤–æ–∫—Ä—É–≥ —Ü–µ–Ω—Ç—Ä–∞ (rotation matrix)
–°–æ–∑–¥–∞—é—Ç "—Å–∏–ª–æ–≤—ã–µ –≤–∏—Ö—Ä–∏"
2. –ß–∞—Å—Ç–∏—Ü—ã (250 –≤–∏–¥–∏–º—ã—Ö —Ç–æ—á–µ–∫):
points.push(new Point(...))

–ü—Ä–∏—Ç—è–≥–∏–≤–∞—é—Ç—Å—è –∫ –±–ª–∏–∂–∞–π—à–∏–º —Å–∏–ª–æ–≤—ã–º —Ç–æ—á–∫–∞–º
–ß–µ–º –±–ª–∏–∂–µ –∫ —Å–∏–ª–µ ‚Üí —Ç–µ–º —Å–∏–ª—å–Ω–µ–µ –ø—Ä–∏—Ç—è–∂–µ–Ω–∏–µ (exponential falloff)
–¢—Ä–µ–Ω–∏–µ vx *= 0.97 ‚Üí –ø–ª–∞–≤–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ
3. –ê–Ω–∏–º–∞—Ü–∏—è:
150 –∏—Ç–µ—Ä–∞—Ü–∏–π –∑–∞ –∫–∞–¥—Ä - —á–∞—Å—Ç–∏—Ü—ã "–ø—Ä–æ–∫—Ä—É—á–∏–≤–∞—é—Ç—Å—è" –ø–æ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—è–º
–ö–∞–∂–¥–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è —Ä–∏—Å—É–µ—Ç —Å–ª–µ–¥
–¶–≤–µ—Ç –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ –¥–≤–∏–∂–µ–Ω–∏—è (–±—ã—Å—Ç—Ä—ã–µ = —è—Ä–∫–∏–µ)
–í—Ä–∞—â–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–ª—è ‚Üí —á–∞—Å—Ç–∏—Ü—ã —Ä–∏—Å—É—é—Ç —Å–ø–∏—Ä–∞–ª–∏
4. Trail —ç—Ñ—Ñ–µ–∫—Ç:
–°–ª–µ–¥—ã –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è –≤ —Ç–µ–∫—Å—Ç—É—Ä–µ
'add' blend mode ‚Üí —Å–≤–µ—á–µ–Ω–∏–µ –≤ –º–µ—Å—Ç–∞—Ö –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è
–ü–æ–ª—É—á–∞–µ—Ç—Å—è —Ñ–ª—é–∏–¥-–ø–∞—Ç—Ç–µ—Ä–Ω —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ –≤–∏—Ö—Ä—è–º–∏
–ò—Ç–æ–≥: –≤—Ä–∞—â–∞—é—â–µ–µ—Å—è —Å–∏–ª–æ–≤–æ–µ –ø–æ–ª–µ "—Ä–∏—Å—É–µ—Ç" —á–∞—Å—Ç–∏—Ü–∞–º–∏ —Å–≤–µ—Ç—è—â–∏–µ—Å—è —Å–ø–∏—Ä–∞–ª—å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã! üåÄ‚ú®



## –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã (–¥–µ—Ç–∞–ª—å–Ω–æ)

1. –í–µ–∫—Ç–æ—Ä–Ω–æ–µ –ø–æ–ª–µ - –Ω–µ–≤–∏–¥–∏–º—ã–µ "–º–∞–≥–Ω–∏—Ç—ã"
for (let i = 0; i < 20; i++) {
  const location = [r * Math.cos(theta), r * Math.sin(theta)];
  const direction = [Math.random() - 0.5, Math.random() - 0.5];
  field.push(new PointVector(...location, ...direction));
}

20 —Å–∏–ª–æ–≤—ã—Ö —Ç–æ—á–µ–∫ —Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è —Å–ª—É—á–∞–π–Ω–æ –≤–æ–∫—Ä—É–≥ —Ü–µ–Ω—Ç—Ä–∞
–ö–∞–∂–¥–∞—è –∏–º–µ–µ—Ç:
px, py - –ø–æ–∑–∏—Ü–∏—é –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ
dx, dy - –≤–µ–∫—Ç–æ—Ä –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏–ª—ã (—Å–ª—É—á–∞–π–Ω—ã–π)
altx, alty - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–æ)
–≠—Ç–∏ —Ç–æ—á–∫–∏ –Ω–µ –≤–∏–¥–Ω—ã, –Ω–æ –≤–ª–∏—è—é—Ç –Ω–∞ —á–∞—Å—Ç–∏—Ü—ã
–í—Ä–∞—â–µ–Ω–∏–µ –ø–æ–ª—è:

const dx = pv.dx * cos(dtheta) - pv.dy * sin(dtheta);
const dy = pv.dx * sin(dtheta) + pv.dy * cos(dtheta);

Rotation matrix –Ω–∞ —É–≥–æ–ª dtheta = 0.01 —Ä–∞–¥–∏–∞–Ω
–ö–∞–∂–¥—ã–π –∫–∞–¥—Ä –≤–µ–∫—Ç–æ—Ä—ã —Å–∏–ª—ã –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞—é—Ç—Å—è
–ó–∞ ~628 –∫–∞–¥—Ä–æ–≤ (2œÄ / 0.01) - –ø–æ–ª–Ω—ã–π –æ–±–æ—Ä–æ—Ç ‚Üí –∞–Ω–∏–º–∞—Ü–∏—è –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
2. –ß–∞—Å—Ç–∏—Ü—ã - "—á–µ—Ä–Ω–∏–ª—å–Ω—ã–µ –∫–∞–ø–ª–∏"
for (let _ = 0; _ < 250; _++) {
  const pt = new Point(random_x, random_y);
  points.push(pt);
}

250 —á–∞—Å—Ç–∏—Ü —Å—Ç–∞—Ä—Ç—É—é—Ç –≤ —Å–ª—É—á–∞–π–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏—è—Ö
–£ –∫–∞–∂–¥–æ–π:
ipx, ipy - –Ω–∞—á–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è (anchor point)
px, py - —Ç–µ–∫—É—â–∞—è –ø–æ–∑–∏—Ü–∏—è
vx, vy - —Å–∫–æ—Ä–æ—Å—Ç—å (velocity)
–§–∏–∑–∏–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è (–∫–∞–∂–¥–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è):

// 1. –ü—Ä–∏–º–µ–Ω—è–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å
this.px += this.vx;
this.py += this.vy;

// 2. –¢—Ä–µ–Ω–∏–µ (–∑–∞—Ç—É—Ö–∞–Ω–∏–µ)
this.vx *= 0.97;
this.vy *= 0.97;

// 3. –ü—Ä–∏—Ç—è–∂–µ–Ω–∏–µ –∫ —Å–∏–ª–æ–≤—ã–º —Ç–æ—á–∫–∞–º
for (const pv of field) {
  const dist = (pv.px - this.px)¬≤ + (pv.py - this.py)¬≤;
  const mult = Math.exp(-0.0015 * dist); // ‚Üê exponential falloff
  
  this.vx += mult * pv.dx;
  this.vy += mult * pv.dy;
}

–ö–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç: Math.exp(-0.0015 * dist)

–ë–ª–∏–∑–∫–æ –∫ —Å–∏–ª–µ ‚Üí mult ‚âà 1 ‚Üí —Å–∏–ª—å–Ω–æ–µ –ø—Ä–∏—Ç—è–∂–µ–Ω–∏–µ
–î–∞–ª–µ–∫–æ –æ—Ç —Å–∏–ª—ã ‚Üí mult ‚âà 0 ‚Üí —Å–ª–∞–±–æ–µ –≤–ª–∏—è–Ω–∏–µ
–°–æ–∑–¥–∞–µ—Ç –ø–ª–∞–≤–Ω—ã–µ –≤–∏—Ö—Ä–∏ –≤–º–µ—Å—Ç–æ —Ä–µ–∑–∫–∏—Ö —Å–∫–∞—á–∫–æ–≤
3. 150 –∏—Ç–µ—Ä–∞—Ü–∏–π - "–ø—Ä–æ—Ä–∏—Å–æ–≤–∫–∞ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–π"
for (iter = 0; iter < 150; iter++) {
  for (let i = 0; i < points.length; i++) {
    points[i].update(); // –î–≤–∏–≥–∞–µ–º —á–∞—Å—Ç–∏—Ü—É
    
    // –†–∏—Å—É–µ–º —Å–ª–µ–¥
    const x = points[i].px + width / 2;
    const y = points[i].py + height / 2;
    tempGraphics.rect(x, y, 1, 1);
    tempGraphics.fill({ color: color, alpha: 0.01 });
  }
}

–ü–æ—á–µ–º—É 150 –∏—Ç–µ—Ä–∞—Ü–∏–π?

–ö–∞–∂–¥–∞—è —á–∞—Å—Ç–∏—Ü–∞ –¥–µ–ª–∞–µ—Ç 150 –º–∏–∫—Ä–æ-—à–∞–≥–æ–≤
–†–∏—Å—É–µ—Ç –ø–∏–∫—Å–µ–ª—å –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ
–ü–æ–ª—É—á–∞–µ—Ç—Å—è –ø–ª–∞–≤–Ω–∞—è –∫—Ä–∏–≤–∞—è –≤–º–µ—Å—Ç–æ —Ç–æ—á–∫–∏
250 —á–∞—Å—Ç–∏—Ü √ó 150 –∏—Ç–µ—Ä–∞—Ü–∏–π = 37,500 –ø–∏–∫—Å–µ–ª–µ–π –∑–∞ –∫–∞–¥—Ä
–ü–æ—Å–ª–µ 150 –∏—Ç–µ—Ä–∞—Ü–∏–π:

// –°–±—Ä–æ—Å –≤ –Ω–∞—á–∞–ª—å–Ω—É—é –ø–æ–∑–∏—Ü–∏—é
points[i].px = points[i].ipx;
points[i].py = points[i].ipy;
points[i].vx = 0;
points[i].vy = 0;

–ß–∞—Å—Ç–∏—Ü—ã —Ç–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ –≤ —Å—Ç–∞—Ä—Ç–æ–≤—É—é —Ç–æ—á–∫—É
–°–ª–µ–¥—É—é—â–∏–π –∫–∞–¥—Ä ‚Üí —Ä–∏—Å—É—é—Ç —Å–Ω–æ–≤–∞, –Ω–æ –ø–æ–ª–µ —É–∂–µ –ø–æ–≤–µ—Ä–Ω—É–ª–æ—Å—å
–ù–æ–≤–∞—è —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—è ‚Üí –Ω–æ–≤—ã–π —É–∑–æ—Ä
4. –¶–≤–µ—Ç –∏ —è—Ä–∫–æ—Å—Ç—å - "—Å–∫–æ—Ä–æ—Å—Ç—å = —Å–≤–µ—Ç"
// –î–∏—Å—Ç–∞–Ω—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –ø—Ä–æ—à–ª–∞ —á–∞—Å—Ç–∏—Ü–∞
let d = ‚àö((px - ipx)¬≤ + (py - ipy)¬≤);
d = clamp(d * 100, 0, 1); // –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è

// –û—Ç—Ç–µ–Ω–æ–∫ - –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–æ–º–µ—Ä–∞ —á–∞—Å—Ç–∏—Ü—ã
let h = ((hue_seed + 0.2 * (i / 250)) % 1) * 360;

// –Ø—Ä–∫–æ—Å—Ç—å - –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∏—Ç–µ—Ä–∞—Ü–∏–∏
let b = 0.4 * (1 - iter / 150) + 0.4;
// iter=0   ‚Üí b=0.8 (—è—Ä–∫–∏–µ)
// iter=150 ‚Üí b=0.4 (—Ç—É—Å–∫–ª—ã–µ)

–≠—Ñ—Ñ–µ–∫—Ç:

–ë—ã—Å—Ç—Ä–æ –¥–≤–∏–∂—É—â–∏–µ—Å—è —á–∞—Å—Ç–∏—Ü—ã (d –±–æ–ª—å—à–æ–π) ‚Üí –Ω–∞—Å—ã—â–µ–Ω–Ω—ã–π —Ü–≤–µ—Ç
–ú–µ–¥–ª–µ–Ω–Ω—ã–µ —á–∞—Å—Ç–∏—Ü—ã ‚Üí –±–ª–µ–¥–Ω—ã–π —Ü–≤–µ—Ç
–ü–µ—Ä–≤—ã–µ –∏—Ç–µ—Ä–∞—Ü–∏–∏ ‚Üí —è—Ä—á–µ
–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏—Ç–µ—Ä–∞—Ü–∏–∏ ‚Üí —Ç–µ–º–Ω–µ–µ
5. –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ –∏ —Å–≤–µ—á–µ–Ω–∏–µ
app.renderer.render({
  container: tempGraphics,
  target: renderTexture,
  clear: false // ‚Üê –ù–ï –æ—á–∏—â–∞–µ–º!
});

–ö–∞–∂–¥—ã–π –∫–∞–¥—Ä –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–∏–∫—Å–µ–ª–∏ –≤ —Ç–µ–∫—Å—Ç—É—Ä—É
blendMode: 'add' ‚Üí RGB —Å–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è
–ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–π ‚Üí —è—Ä–∫–∏–µ –ø—è—Ç–Ω–∞
–ó–∞ ~628 –∫–∞–¥—Ä–æ–≤ ‚Üí –ø–ª–æ—Ç–Ω—ã–π —Å–≤–µ—Ç—è—â–∏–π—Å—è –ø–∞—Ç—Ç–µ—Ä–Ω
–ò—Ç–æ–≥–æ–≤–∞—è –∫–∞—Ä—Ç–∏–Ω–∞:
–°–∏–ª–æ–≤–æ–µ –ø–æ–ª–µ –≤—Ä–∞—â–∞–µ—Ç—Å—è ‚Üí –º–µ–Ω—è–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏—Ç—è–∂–µ–Ω–∏—è
–ß–∞—Å—Ç–∏—Ü—ã –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞—é—Ç —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏ ‚Üí —Ä–∏—Å—É—é—Ç –∫—Ä–∏–≤–æ–ª–∏–Ω–µ–π–Ω—ã–µ —Å–ª–µ–¥—ã
–°–ª–µ–¥—ã –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è ‚Üí —Å–æ–∑–¥–∞—é—Ç —Å–ª–æ–∂–Ω—ã–µ —Å–ø–∏—Ä–∞–ª—å–Ω—ã–µ —É–∑–æ—Ä—ã
Add blending ‚Üí –º–µ—Å—Ç–∞ –≤—ã—Å–æ–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–≤–µ—Ç—è—Ç—Å—è —è—Ä—á–µ
–ê–Ω–∏–º–∞—Ü–∏—è –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ 2œÄ —Ä–∞–¥–∏–∞–Ω ‚Üí —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∏–Ω–∞
–†–µ–∑—É–ª—å—Ç–∞—Ç: –æ—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∏–µ –≤–∏—Ö—Ä–µ–≤—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã, –ø–æ—Ö–æ–∂–∏–µ –Ω–∞ –≥–∞–ª–∞–∫—Ç–∏–∫–∏, aurora borealis –∏–ª–∏ –∂–∏–¥–∫–∏–µ —á–µ—Ä–Ω–∏–ª–∞ –≤ –≤–æ–¥–µ! üååüí´